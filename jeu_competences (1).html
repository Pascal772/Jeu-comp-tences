<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Jeu : Développer mes compétences</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 600px;
      margin: 40px auto;
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #2a7ae2;
    }
    .competence {
      margin: 20px 0;
      padding: 15px;
      background: #e8f0fe;
      border-radius: 8px;
    }
    .validated {
      background: #b2f2bb;
    }
    button {
      background: #2a7ae2;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }
    button:disabled {
      background: #ccc;
    }
    .end-message {
      text-align: center;
      font-size: 1.3em;
      color: #388e3c;
      margin-top: 30px;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Développer mes compétences</h1>
    <div id="game"></div>
    <div id="end" class="end-message" style="display:none;">
      Félicitations ! Vous avez validé toutes les compétences !
    </div>
  </div>

  <script>
    // --- Scénarios de compétences ---
    const competences = [
      {
        nom: "Communication",
        scenario: "Vous devez expliquer une idée complexe à un collègue qui ne connaît pas le sujet. Que faites-vous ?",
        options: [
          { texte: "Utiliser des exemples simples et poser des questions pour vérifier la compréhension.", correct: true },
          { texte: "Parler rapidement pour tout expliquer en peu de temps.", correct: false }
        ]
      },
      {
        nom: "Résolution de problèmes",
        scenario: "Un projet rencontre un obstacle inattendu. Quelle est votre première action ?",
        options: [
          { texte: "Analyser la situation et chercher des solutions alternatives.", correct: true },
          { texte: "Ignorer le problème et espérer qu'il se résolve tout seul.", correct: false }
        ]
      },
      {
        nom: "Travail en équipe",
        scenario: "Un membre de votre équipe n'est pas d'accord avec votre idée. Comment réagissez-vous ?",
        options: [
          { texte: "Écouter son point de vue et chercher un compromis.", correct: true },
          { texte: "Imposer votre idée sans discussion.", correct: false }
        ]
      },
      {
        nom: "Gestion du temps",
        scenario: "Vous avez plusieurs tâches urgentes à accomplir. Que faites-vous ?",
        options: [
          { texte: "Prioriser les tâches et établir un planning.", correct: true },
          { texte: "Faire les tâches au hasard.", correct: false }
        ]
      }
    ];

    let validees = Array(competences.length).fill(false);

    // --- Fonction d’affichage du jeu ---
    function renderGame() {
      const gameDiv = document.getElementById('game');
      gameDiv.innerHTML = '';

      competences.forEach((comp, idx) => {
        const compDiv = document.createElement('div');
        compDiv.className = 'competence' + (validees[idx] ? ' validated' : '');
        compDiv.innerHTML = `<strong>${comp.nom}</strong><br>${comp.scenario}`;

        if (!validees[idx]) {
          comp.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.textContent = opt.texte;
            btn.onclick = () => {
              if (opt.correct) {
                validees[idx] = true;
                renderGame();
                checkEnd();
              } else {
                btn.disabled = true;
